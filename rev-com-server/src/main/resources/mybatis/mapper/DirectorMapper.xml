<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codergb.mapper.DirectorMapper">
  <insert id="createDirector">
    insert into director(id,name,alias,gender,birthPlace,description)
    values (#{id},#{name},#{alias},#{gender},#{birthPlace},#{description})
  </insert>
  <resultMap id="directorResultMap" type="Director">
    <id property="id" column="id"></id>
    <result property="name" column="name"></result>
    <result property="avatarUrl" column="avatarUrl"></result>
    <result property="alias" column="alias"></result>
    <result property="gender" column="gender"></result>
    <result property="birthPlace" column="birthPlace"></result>
    <result property="description" column="description"></result>
    <result property="createTime" column="createTime"></result>
    <result property="updateTime" column="updateTime"></result>
    <result property="originalname" column="originalname"></result>
    <result property="dest" column="dest"></result>
    <result property="filename" column="filename"></result>
    <result property="size" column="size"></result>
    <result property="mimetype" column="mimetype"></result>
    <collection property="occupations"
                 ofType="Occupation"
                 select="com.codergb.mapper.OccupationMapper.getOccupationById"
                 column="{id=id,key=dId}"
                 ></collection>
  </resultMap>
  <select id="getAllDirect" resultMap="directorResultMap">
    select * ,"dId" as dId from director
  </select>
</mapper>